<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gov.br - Estudo Enade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rawline:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Rawline', 'Roboto', sans-serif;
        }
        /* Simple animation classes */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-[#f5f5f5] text-[#333333] min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-white">
        <!-- Top small bar -->
        <div class="bg-[#071D41] text-white px-4 md:px-8 py-1 text-xs flex justify-between items-center">
            <div class="flex gap-4">
                <span class="hover:underline cursor-pointer">Brasil</span>
                <span class="hover:underline cursor-pointer hidden sm:inline">Acesso à informação</span>
            </div>
            <div class="flex gap-4">
                <span class="hover:underline cursor-pointer">Entrar</span>
            </div>
        </div>
        
        <!-- Logo bar -->
        <div class="border-b border-gray-200 px-4 md:px-8 py-4 flex items-center justify-between gap-4">
            <div class="flex items-center gap-2">
                <div class="text-[#1351B4] font-bold text-2xl md:text-3xl tracking-tight flex items-center gap-1">
                    <span class="font-black italic">gov</span>.br
                </div>
                <div class="h-8 w-px bg-gray-300 mx-2 hidden sm:block"></div>
                <span class="text-gray-600 font-semibold text-sm sm:text-base leading-tight hidden sm:block">
                    Estudo Dirigido<br/>Engenharia de Produção
                </span>
            </div>
            
            <div class="flex items-center gap-2 md:gap-4">
                <div class="hidden md:flex items-center bg-gray-100 rounded-full px-4 py-2 border border-gray-300">
                    <input type="text" placeholder="O que você procura?" class="bg-transparent outline-none text-sm w-48 text-gray-700 placeholder-gray-500" />
                    <!-- Search Icon -->
                    <svg class="w-4 h-4 text-[#1351B4]" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </div>
                <button class="md:hidden p-2 text-[#1351B4]">
                     <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </button>
                <button class="p-2 text-[#1351B4] border border-[#1351B4] rounded font-semibold text-sm hover:bg-blue-50">
                    Menu
                </button>
            </div>
        </div>
    </header>

    <!-- BREADCRUMB -->
    <div class="bg-[#1351B4] text-white px-4 md:px-8 py-3 shadow-md">
        <div class="max-w-5xl mx-auto flex items-center gap-2 text-sm font-medium overflow-x-auto whitespace-nowrap">
            <span class="opacity-80 hover:underline cursor-pointer">Página Inicial</span>
            <svg class="w-4 h-4 opacity-60" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            <span class="opacity-80 hover:underline cursor-pointer">Educação Superior</span>
            <svg class="w-4 h-4 opacity-60" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
            <span>Estudo ENADE</span>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="flex-grow bg-[#fbfbfb] px-4 md:px-8 py-8">
        <div class="max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- SIDEBAR -->
            <aside class="lg:col-span-3 space-y-6">
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <h3 class="font-bold text-[#1351B4] mb-4 pb-2 border-b border-gray-100 flex items-center gap-2">
                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"/><path d="M22 10v6"/><path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5"/></svg>
                        Questões
                    </h3>
                    <div id="question-list" class="space-y-1">
                        <!-- Question list injected here -->
                    </div>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-100 text-sm text-[#1351B4]">
                    <p class="font-bold mb-2">Como estudar:</p>
                    <p>1. Leia o embasamento teórico.</p>
                    <p>2. Vá para a prática.</p>
                    <p>3. Responda e leia o feedback.</p>
                </div>
            </aside>

            <!-- CONTENT AREA -->
            <section class="lg:col-span-9">
                <!-- Topic Header -->
                <div class="mb-6">
                    <span class="text-xs font-bold tracking-wider text-gray-500 uppercase bg-gray-200 px-2 py-1 rounded">
                        Tópico do Estudo
                    </span>
                    <h1 id="topic-title" class="text-2xl md:text-3xl font-bold text-[#333333] mt-2">
                        <!-- Topic Title injected here -->
                    </h1>
                </div>

                <!-- Tabs -->
                <div id="tab-container" class="flex border-b border-gray-300 mb-6">
                    <button id="tab-theory" onclick="switchTab('theory')" class="px-6 py-3 font-medium text-sm transition-colors border-b-2 border-[#1351B4] text-[#1351B4]">
                        Embasamento Teórico
                    </button>
                    <button id="tab-practice" onclick="switchTab('practice')" class="px-6 py-3 font-medium text-sm transition-colors border-b-2 border-transparent text-gray-500 hover:text-[#1351B4] hover:border-blue-200">
                        Prática (Questão)
                    </button>
                </div>

                <!-- Dynamic Content -->
                <div id="content-container" class="min-h-[400px]">
                    <!-- Content injected here -->
                </div>
            </section>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-[#071D41] text-white py-8 mt-auto">
        <div class="max-w-5xl mx-auto px-4 text-center md:text-left">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-2xl font-bold flex items-center gap-1">
                    <span class="font-black italic">gov</span>.br
                </div>
                <p class="text-sm text-gray-300">
                    Simulador educacional desenvolvido com base em provas do ENADE.
                </p>
            </div>
            <div class="border-t border-blue-900 mt-6 pt-6 text-xs text-gray-400 text-center">
                Todos os direitos reservados às respectivas bancas examinadoras. Uso educacional.
            </div>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const QUESTIONS = [
          {
            id: 'q1',
            examYear: '2019',
            questionNumber: '14',
            topic: 'Engenharia do Trabalho',
            theory: [
              {
                title: "Conceito e Abrangência",
                content: [
                  "A Engenharia do Trabalho visa a otimização das interações entre trabalhadores, máquinas, tarefas e ambiente organizacional.",
                  "Objetivo central: garantir sistemas produtivos compatíveis com capacidades humanas, segurança e eficiência."
                ]
              },
              {
                title: "Modos Operatórios",
                content: [
                  "Estratégias utilizadas pelos trabalhadores para realizar tarefas.",
                  "Emergem da experiência e adaptação às condições reais.",
                  "Não são prescritos formalmente; são respostas às variabilidades."
                ]
              },
              {
                title: "Margem de Manobra",
                content: [
                  "Grau de liberdade que o trabalhador possui para adaptar sua atuação.",
                  "Conceito central na ergonomia. Ajustes individuais fundamentais para desempenho e saúde.",
                  "Tarefas Rígidas: Baixa margem, alta fadiga e erro.",
                  "Tarefas Flexíveis: Alta margem, permite ajuste de ritmo, posturas e autonomia."
                ]
              }
            ],
            contextText: "A análise ergonômica busca adaptar as situações de trabalho às características psicofisiológicas dos trabalhadores. Conhecer a distância entre o trabalho prescrito (tarefa) e o trabalho real (atividade) é essencial nos projetos do trabalho, uma vez que essa distância pode gerar consequências danosas à produtividade e à saúde dos trabalhadores. No projeto do trabalho, é importante analisar a margem de manobra resultante da tarefa, os modos operatórios adotados na atividade e, consequentemente, a carga de trabalho.",
            questionPrompt: "Nesse contexto, quando se aumenta a margem de manobra:",
            options: [
              {
                id: 'A',
                label: 'A',
                text: 'a carga de trabalho e os modos operatórios diminuem.',
                isCorrect: false,
                explanation: "FALSA. Se os modos operatórios diminuem, o trabalhador tem menos opções de ação (oposto de margem de manobra). Menos liberdade geralmente aumenta a carga, não a reduz."
              },
              {
                id: 'B',
                label: 'B',
                text: 'a carga de trabalho e os modos operatórios aumentam.',
                isCorrect: false,
                explanation: "FALSA. O aumento dos modos operatórios está correto, mas o aumento da carga de trabalho não faz sentido. Com mais liberdade, o trabalhador otimiza esforço, reduzindo a carga."
              },
              {
                id: 'C',
                label: 'C',
                text: 'a carga de trabalho aumenta e os modos operatórios diminuem.',
                isCorrect: false,
                explanation: "FALSA. Descreve uma redução de margem de manobra. Menos modos operatórios e mais carga indicam rigidez e sobrecarga."
              },
              {
                id: 'D',
                label: 'D',
                text: 'a carga de trabalho diminui e os modos operatórios aumentam.',
                isCorrect: true,
                explanation: "CORRETA. Maior margem de manobra dá liberdade para escolher como executar tarefas (mais modos operatórios). Isso permite eficiência, evita esforços desnecessários e reduz a carga de trabalho."
              },
              {
                id: 'E',
                label: 'E',
                text: 'a carga de trabalho e os modos operatórios se mantêm inalterados.',
                isCorrect: false,
                explanation: "FALSA. Aumentar a margem necessariamente altera a forma de trabalho e impacta a carga."
              }
            ]
          },
          {
            id: 'q2',
            examYear: '2023',
            questionNumber: '36',
            topic: 'Ergonomia',
            theory: [
              {
                title: "NR-17 Ergonomia",
                content: [
                  "Estabelece parâmetros para adaptar condições de trabalho às características psicofisiológicas.",
                  "Visa conforto, segurança, saúde e eficiência."
                ]
              },
              {
                title: "Requisitos de Mobiliário",
                content: [
                  "Altura compatível com o tipo de atividade e altura do trabalhador.",
                  "Área de fácil alcance e visualização.",
                  "Características dimensionais que possibilitem movimentação adequada."
                ]
              }
            ],
            contextText: "No desenvolvimento do trabalho manual feito na posição sentado ou que tenha de ser feito em pé, bancadas, mesas, escrivaninhas e painéis devem proporcionar ao trabalhador condições de boa postura, visualização e operação e devem atender aos seguintes requisitos mínimos: a) ter altura e características da superfície de trabalho compatíveis com o tipo de atividade, com a distância requerida dos olhos ao campo de trabalho e com a altura do assento; b) ter área de trabalho de fácil alcance e visualização pelo trabalhador; c) ter características dimensionais que possibilitem posicionamento e movimentação adequados dos segmentos corporais. Acerca dos mobiliários adequados em postos de trabalhos conforme disposto na Norma Regulamentadora n. 17, avalie as afirmações a seguir.  ",
            statementText: [
              "I. Os assentos utilizados em postos de trabalho devem ter altura fixa, independentemente da estatura do trabalhador e da natureza da função exercida.",
              "II. Os postos de trabalho, em que as atividades são realizadas em pé, devem possuir mobiliário adequado para que o trabalhador descanse no próprio posto de trabalho.",
              "III. O posto de trabalho, em que a atividade puder ser executada na posição sentada, deve ser planejado ou adaptado para esta posição.",
              "IV. Os assentos utilizados nos postos de trabalho devem ter encosto com forma levemente adaptada ao corpo do trabalhador, para a proteção de sua região lombar."
            ],
            questionPrompt: "É correto apenas o que se afirma em:",
            options: [
              {
                id: 'A',
                label: 'A',
                text: 'I e II.',
                isCorrect: false,
                explanation: "INCORRETA. (I) é Falsa: A NR-17 exige altura ajustável, não fixa. (II) é Falsa: O assento para descanso não precisa ser 'no próprio posto' necessariamente, e não deve ser usado continuamente se a função é em pé."
              },
              {
                id: 'B',
                label: 'B',
                text: 'II e III.',
                isCorrect: false,
                explanation: "INCORRETA. (II) é Falsa conforme explicado acima."
              },
              {
                id: 'C',
                label: 'C',
                text: 'III e IV.',
                isCorrect: true,
                explanation: "CORRETA! III - O propósito das medidas ergonômicas: reduzir o esforço físico, minimizar sobrecarga e favorecer posturas confortáveis e seguras. (IV) Verdadeira: Encosto adaptado para lombar é exigência da norma."
              },
              {
                id: 'D',
                label: 'D',
                text: 'I, II e IV.',
                isCorrect: false,
                explanation: "INCORRETA. (I) e (II) são Falsas."
              },
              {
                id: 'E',
                label: 'E',
                text: 'I, III e IV.',
                isCorrect: false,
                explanation: "INCORRETA. (I) é Falsa."
              }
            ]
          },
          {
            id: 'q3',
            examYear: '2023',
            questionNumber: '38',
            topic: 'Higiene e Segurança do Trabalho',
            theory: [
              {
                title: "Classificação de Riscos (NR-05)",
                content: [
                  "Risco Físico: Ruído, vibrações, calor, frio, radiações, umidade.",
                  "Risco Químico: Poeira, fumos, névoas, gases, vapores, substâncias químicas.",
                  "Risco Biológico: Vírus, bactérias, protozoários.",
                  "Risco Ergonômico: Esforço intenso, postura inadequada, controle rígido, repetitividade.",
                  "Risco de Acidentes: Máquinas sem proteção, eletricidade, arranjo físico inadequado, animais peçonhentos."
                ]
              }
            ],
            contextText: "No esquema apresentado a seguir, estão identificados cinco ambientes de trabalho de uma instalação industrial. Para cada um desses ambientes foram identificados os riscos ambientais listados.",
            imageUrl: "https://scontent.fqcp1-1.fna.fbcdn.net/v/t39.30808-6/585346262_4311394679093711_4700605399950468346_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=127cfc&_nc_ohc=KtusY1q_ZrIQ7kNvwECX91G&_nc_oc=Adn6iFaTcv9wbF2Q7I8VZkvtxg2MTi1IykLk9TGCZzT-uKfSSUkZ2GeH3a9Ki3X2OfPpVlErkUM4dnH9Q17FwSwC&_nc_zt=23&_nc_ht=scontent.fqcp1-1.fna&_nc_gid=n2ZyrJquwW91J92qHxehaQ&oh=00_AfjVgcFODrqJLeBEb3XYGf5giijR-QddrPBRZkxXxF9FmA&oe=692CCB22",
            statementText: [
              "Ambiente A: alto ruído de máquinas e equipamentos;",
              "Ambiente B: operação com eletricidade;",
              "Ambiente C: radiações ionizantes;",
              "Ambiente D: utilização de óleos e lubrificantes;",
              "Ambiente E: postura inadequada."
            ],
            questionPrompt: "Os riscos mencionados para os ambientes A, B, C, D e E, podem ser classificados no processo de construção de um mapa de riscos, respectivamente, como:",
            options: [
              {
                id: 'A',
                label: 'A',
                text: 'físico, físico, acidente, físico e ergonômico.',
                isCorrect: false,
                explanation: "ERRADO. Eletricidade (B) é acidente, não físico. Óleo (D) é químico, não físico."
              },
              {
                id: 'B',
                label: 'B',
                text: 'ergonômico, físico, químico, químico e físico.',
                isCorrect: false,
                explanation: "ERRADO. Ruído (A) é físico. Eletricidade (B) é acidente."
              },
              {
                id: 'C',
                label: 'C',
                text: 'acidente, acidente, químico, químico e físico.',
                isCorrect: false,
                explanation: "ERRADO. Ruído (A) é físico."
              },
              {
                id: 'D',
                label: 'D',
                text: 'físico, acidente, químico, ergonômico e físico.',
                isCorrect: false,
                explanation: "ERRADO. Radiação (C) é físico, não químico. Óleo (D) é químico, não ergonômico. Postura (E) é ergonômico, não físico."
              },
              {
                id: 'E',
                label: 'E',
                text: 'físico, acidente, físico, químico e ergonômico.',
                isCorrect: true,
                explanation: "CORRETO. A (Ruído) = Físico. B (Eletricidade) = Acidente. C (Radiação) = Físico. D (Óleos) = Químico. E (Postura) = Ergonômico."
              }
            ]
          },
          {
            id: 'q4',
            examYear: '2017',
            questionNumber: '08',
            topic: 'Gestão Ambiental',
            theory: [
              {
                title: "Objetivos de Desenvolvimento Sustentável (ODS)",
                content: [
                  "Agenda global da ONU (Agenda 2030).",
                  "3 Dimensões: Econômica (Crescimento, inovação), Social (Educação, saúde, igualdade) e Ambiental (Biosfera, clima).",
                  "ODS 8: Trabalho decente e crescimento econômico.",
                  "ODS 9: Indústria, inovação e infraestrutura."
                ]
              }
            ],
            imageUrl: "https://scontent.fqcp1-1.fna.fbcdn.net/v/t39.30808-6/584779915_4311394702427042_6444942912430040990_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=127cfc&_nc_ohc=Ix2caejxJ58Q7kNvwH18UMC&_nc_oc=AdleHxPIzq1MfakYkvbjNCWmUeSLi-Bh5ZEoDRSEiHdZ1_CMZr4ddvEE5HFmxJ1bE4XpQuD47wYLV8uCQAsEUy0o&_nc_zt=23&_nc_ht=scontent.fqcp1-1.fna&_nc_gid=09xKyvWPYB38kfw3HIGTPg&oh=00_Afje4ov8extczJsaqrh6ZoGpgt9ZQ1KqSkIXq1JGHiGFXA&oe=692CCEE0",
            contextText: "Os Objetivos de Desenvolvimento Sustentável (ODS) compõem uma agenda mundial adotada durante a Cúpula das Nações Unidas sobre o Desenvolvimento Sustentável, em setembro de 2015. Nessa agenda, representada na figura a seguir, são previstas ações em diversas áreas para o estabelecimento de parcerias, grupos e redes que favoreçam o cumprimento desses objetivos. . Considerando que os ODS devem ser implementados por meio de ações que integrem a economia, a sociedade e a biosfera, avalie as afirmações a seguir.",
            statementText: [
              "I. O capital humano deve ser capacitado para atender as demandas por pesquisa e inovação em áreas estratégicas para o desenvolvimento sustentável.",
              "II. A padronização cultural dinamiza a difusão do conhecimento cientifico e tecnológico entre as nações para a promoção do desenvolvimento sustentável.",
              "III. Os países devem incentivar politicas de desenvolvimento do empreendedorismo e de atividades produtivas com geração de empregos que garantam a dignidade da pessoa humana."
            ],
            questionPrompt: "É correto o que se afirma em:",
            options: [
              {
                id: 'A',
                label: 'A',
                text: 'II, apenas.',
                isCorrect: false,
                explanation: "ERRADO. (II) é Falsa: ODS valorizam a diversidade cultural, não a padronização/homogeneização."
              },
              {
                id: 'B',
                label: 'B',
                text: 'III, apenas.',
                isCorrect: false,
                explanation: "ERRADO. (I) também é verdadeira."
              },
              {
                id: 'C',
                label: 'C',
                text: 'I e II, apenas.',
                isCorrect: false,
                explanation: "ERRADO. (II) é Falsa."
              },
              {
                id: 'D',
                label: 'D',
                text: 'I e III, apenas.',
                isCorrect: true,
                explanation: "CORRETO. (I) Verdadeira: Capacitação para inovação alinha-se ao ODS 9. (III) Verdadeira: Empreendedorismo e trabalho digno alinham-se ao ODS 8."
              },
              {
                id: 'E',
                label: 'E',
                text: 'I, II e III.',
                isCorrect: false,
                explanation: "ERRADO. (II) é Falsa."
              }
            ]
          },
          {
            id: 'q5',
            examYear: '2014',
            questionNumber: '03',
            topic: 'Gestão Ambiental',
            theory: [],
            videoEmbed: '<iframe width="100%" height="100%" src="https://www.youtube.com/embed/9HMqGO4GreM" title="Vídeo questão Enade" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',
            contextText: "Abaixo, assista ao vídeo referente à questão Enade 2014 - Questão 3.",
            questionPrompt: "",
            options: []
          }
        ];

        // --- STATE ---
        let currentQuestionIndex = 0;
        let activeTab = 'theory';
        let selectedOptionId = null;

        // --- DOM ELEMENTS ---
        const els = {
            questionList: document.getElementById('question-list'),
            topicTitle: document.getElementById('topic-title'),
            contentContainer: document.getElementById('content-container'),
            tabContainer: document.getElementById('tab-container'),
            tabTheory: document.getElementById('tab-theory'),
            tabPractice: document.getElementById('tab-practice'),
        };

        // --- RENDERING ---

        function init() {
            renderSidebar();
            renderApp();
        }

        function renderApp() {
            const q = QUESTIONS[currentQuestionIndex];
            els.topicTitle.innerText = q.topic;
            
            // Logic to hide tabs if no theory available (e.g. video only question)
            if (q.theory.length === 0) {
                els.tabContainer.style.display = 'none';
                renderQuiz(q);
            } else {
                els.tabContainer.style.display = 'flex';
                updateTabsStyles();
                if (activeTab === 'theory') {
                    renderTheory(q);
                } else {
                    renderQuiz(q);
                }
            }
            
            // Update sidebar active state
            renderSidebar();
        }

        function renderSidebar() {
            els.questionList.innerHTML = QUESTIONS.map((q, idx) => {
                const isActive = currentQuestionIndex === idx;
                const baseClass = "w-full text-left px-3 py-2 text-sm rounded-md transition-colors flex justify-between items-center";
                const activeClass = "bg-[#1351B4] text-white font-medium shadow-sm";
                const inactiveClass = "text-gray-600 hover:bg-blue-50";
                
                return `
                    <button onclick="selectQuestion(${idx})" class="${baseClass} ${isActive ? activeClass : inactiveClass}">
                        <span>${q.examYear} - Q${q.questionNumber}</span>
                        ${isActive ? '<svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>' : ''}
                    </button>
                `;
            }).join('');
        }

        function updateTabsStyles() {
            const activeClass = "border-[#1351B4] text-[#1351B4]";
            const inactiveClass = "border-transparent text-gray-500 hover:text-[#1351B4] hover:border-blue-200";
            
            if (activeTab === 'theory') {
                els.tabTheory.className = `px-6 py-3 font-medium text-sm transition-colors border-b-2 ${activeClass}`;
                els.tabPractice.className = `px-6 py-3 font-medium text-sm transition-colors border-b-2 ${inactiveClass}`;
            } else {
                els.tabTheory.className = `px-6 py-3 font-medium text-sm transition-colors border-b-2 ${inactiveClass}`;
                els.tabPractice.className = `px-6 py-3 font-medium text-sm transition-colors border-b-2 ${activeClass}`;
            }
        }

        function renderTheory(q) {
            const content = `
                <div class="fade-in">
                    <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex items-center gap-2 mb-4 pb-2 border-b border-gray-100">
                            <svg class="text-[#1351B4] w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                            <h2 class="text-xl font-bold text-[#1351B4]">Embasamento Teórico</h2>
                        </div>
                        <div class="space-y-6">
                            ${q.theory.map(section => `
                                <div>
                                    <h3 class="text-lg font-semibold text-[#333333] mb-2">${section.title}</h3>
                                    <ul class="list-disc pl-5 space-y-1">
                                        ${section.content.map(item => `
                                            <li class="text-gray-700 leading-relaxed text-sm md:text-base">${item}</li>
                                        `).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="flex justify-end">
                        <button onclick="switchTab('practice')" class="bg-[#1351B4] hover:bg-[#0c326f] text-white font-semibold py-2 px-6 rounded shadow-sm transition-colors flex items-center gap-2">
                            Ir para a Questão 
                            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                        </button>
                    </div>
                </div>
            `;
            els.contentContainer.innerHTML = content;
        }

        function renderQuiz(q) {
            let mediaHTML = '';
            if (q.imageUrl) {
                mediaHTML = `
                    <div class="my-6 flex justify-center">
                        <img src="${q.imageUrl}" alt="Imagem da Questão" class="max-w-full h-auto max-h-[400px] object-contain border border-gray-200 rounded shadow-sm" />
                    </div>
                `;
            } else if (q.videoEmbed) {
                mediaHTML = `
                    <div class="my-6 w-full max-w-4xl mx-auto">
                        <div class="aspect-video w-full rounded shadow-sm overflow-hidden border border-gray-200">
                           ${q.videoEmbed}
                        </div>
                    </div>
                `;
            }

            let statementsHTML = '';
            if (q.statementText) {
                statementsHTML = `
                    <div class="bg-gray-50 p-4 rounded border-l-4 border-[#1351B4] my-4">
                      <ul class="space-y-2">
                        ${q.statementText.map(stmt => `<li class="text-sm md:text-base leading-relaxed">${stmt}</li>`).join('')}
                      </ul>
                    </div>
                `;
            }

            // Options Logic
            const optionsHTML = q.options.map(opt => {
                const isSelected = selectedOptionId === opt.id;
                const isDisabled = selectedOptionId !== null;
                
                let btnClass = "w-full text-left p-4 rounded-md border transition-all duration-200 flex items-start gap-3 ";
                let circleClass = "flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border ";

                if (!isDisabled) {
                    btnClass += "border-gray-300 hover:bg-gray-50 hover:border-[#1351B4] cursor-pointer";
                    circleClass += "bg-white text-gray-600 border-gray-300";
                } else if (isSelected) {
                    if (opt.isCorrect) {
                        btnClass += "border-green-600 bg-green-50 ring-1 ring-green-600";
                        circleClass += "bg-green-600 text-white border-green-600";
                    } else {
                        btnClass += "border-red-600 bg-red-50 ring-1 ring-red-600";
                        circleClass += "bg-red-600 text-white border-red-600";
                    }
                } else {
                    btnClass += "border-gray-200 opacity-50 cursor-not-allowed";
                    circleClass += "bg-white text-gray-600 border-gray-300";
                }

                return `
                    <button onclick="selectOption('${opt.id}')" ${isDisabled ? 'disabled' : ''} class="${btnClass}">
                        <div class="${circleClass}">
                            ${opt.label}
                        </div>
                        <span class="mt-1 text-sm md:text-base">${opt.text}</span>
                    </button>
                `;
            }).join('');

            // Feedback Box Logic
            let feedbackHTML = '';
            if (selectedOptionId) {
                const selectedOpt = q.options.find(o => o.id === selectedOptionId);
                const isCorrect = selectedOpt.isCorrect;
                const boxClass = isCorrect ? "bg-green-50 border-green-600 text-green-900" : "bg-red-50 border-red-600 text-red-900";
                const iconSVG = isCorrect 
                    ? '<svg class="w-6 h-6 flex-shrink-0 text-green-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>'
                    : '<svg class="w-6 h-6 flex-shrink-0 text-red-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>';

                feedbackHTML = `
                    <div class="mt-6 p-4 rounded-md border-l-4 slide-in ${boxClass}">
                        <div class="flex items-start gap-3">
                            ${iconSVG}
                            <div>
                                <h4 class="font-bold mb-1">
                                    ${isCorrect ? "Resposta Correta!" : "Resposta Incorreta"}
                                </h4>
                                <p class="text-sm leading-relaxed">
                                    ${selectedOpt.explanation}
                                </p>
                                <button onclick="resetOption()" class="mt-3 text-xs font-semibold underline hover:no-underline opacity-80">
                                    Tentar novamente
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            const content = `
                <div class="fade-in">
                    <div class="bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden">
                        <!-- Header -->
                        <div class="bg-[#f8f8f8] p-4 border-b border-gray-200 flex justify-between items-center">
                            <span class="text-sm font-semibold text-[#1351B4] bg-blue-50 px-3 py-1 rounded-full border border-blue-100">
                                Enade ${q.examYear}
                            </span>
                            <span class="text-sm text-gray-500 font-medium">Questão ${q.questionNumber}</span>
                        </div>

                        <div class="p-6">
                            <div class="mb-6 text-[#333333]">
                                <p class="leading-relaxed mb-4 text-justify">${q.contextText}</p>
                                ${mediaHTML}
                                ${statementsHTML}
                                <p class="font-bold text-[#1351B4] mt-4">${q.questionPrompt}</p>
                            </div>

                            <div class="space-y-3">
                                ${optionsHTML}
                            </div>

                            ${feedbackHTML}
                        </div>
                    </div>

                    <div class="flex justify-between mt-6">
                        <button onclick="prevQuestion()" ${currentQuestionIndex === 0 ? 'disabled class="opacity-50 cursor-not-allowed px-4 py-2 text-sm font-medium text-[#1351B4] border border-[#1351B4] rounded"' : 'class="px-4 py-2 text-sm font-medium text-[#1351B4] border border-[#1351B4] rounded hover:bg-blue-50"'} >
                            Anterior
                        </button>
                        <button onclick="nextQuestion()" ${currentQuestionIndex === QUESTIONS.length - 1 ? 'disabled class="opacity-50 cursor-not-allowed px-4 py-2 text-sm font-medium text-[#1351B4] border border-[#1351B4] rounded"' : 'class="px-4 py-2 text-sm font-medium text-[#1351B4] border border-[#1351B4] rounded hover:bg-blue-50"'} >
                            Próxima Questão
                        </button>
                    </div>
                </div>
            `;
            els.contentContainer.innerHTML = content;
        }

        // --- ACTIONS ---

        window.selectQuestion = (idx) => {
            currentQuestionIndex = idx;
            selectedOptionId = null;
            activeTab = 'theory';
            renderApp();
        };

        window.switchTab = (tabName) => {
            activeTab = tabName;
            renderApp();
        };

        window.selectOption = (optId) => {
            selectedOptionId = optId;
            renderApp();
        };

        window.resetOption = () => {
            selectedOptionId = null;
            renderApp();
        }

        window.nextQuestion = () => {
            if (currentQuestionIndex < QUESTIONS.length - 1) {
                currentQuestionIndex++;
                selectedOptionId = null;
                activeTab = 'theory';
                renderApp();
            }
        };

        window.prevQuestion = () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                selectedOptionId = null;
                activeTab = 'theory';
                renderApp();
            }
        };

        // Start
        init();

    </script>
</body>
</html>